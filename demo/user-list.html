

<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="../../iron-ajax/iron-ajax.html">
<link rel="import" href="../../vaadin-grid/vaadin-grid.html">
<link rel="import" href="../../vaadin-pouchdb/vaadin-pouchdb.html">
<link rel="import" href="../crud-list-mixin.html">

<link rel="import" href="user-editor.html">

<dom-module id="user-list">
  <template>
    <style>
      button, input {
        font-size: 1em;
      }
    </style>

    <iron-ajax auto url="users.json" handle-as="json" last-response="{{items}}"></iron-ajax>

    <input value="{{search::input}}" placeholder="Search"></input> <button on-click="new">New Item</button>
    <vaadin-grid id="grid" items="[[filter(items, search, items.*)]]" active-item="{{activeItem}}">
      <vaadin-grid-column>
        <template>[[item.email]]</template>
      </vaadin-grid-column>
      <vaadin-grid-column>
        <template>[[item.name]] [[item.last]]</template>
      </vaadin-grid-column>
    </vaadin-grid>
    <br>
    <user-editor id="editor" item="[[item]]" on-save="save" on-delete="delete" on-close="close" hidden="[[!item]]"></user-editor>
  </template>

  <script>
    class UserList extends window.CrudListMixin(Polymer.Element) {
      static get is() {
        return 'user-list';
      }
    }
    window.customElements.define(UserList.is, UserList);
  </script>
</dom-module>
